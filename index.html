<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>菜鸟教程(runoob.com)</title>
		<script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js">
		</script>
	</head>
	<body>
		<div id="main">
			<img src="image\0.jpg">
			<img src="image\1.jpg">
			<img src="image\2.jpg">
			<img src="image\3.jpg">
			<img src="image\4.jpg">
			<img src="image\5.jpg">
			<img src="image\6.jpg">
			<img src="image\7.jpg">
			<img src="image\8.jpg">
			<img src="image\9.jpg">
			<img src="image\10.jpg">
			<img src="image\11.jpg">
			<img src="image\12.jpg">
			<img src="image\13.jpg">
			<img src="image\14.jpg">
			<img src="image\15.jpg">
		</div>
	</body>
	<script>
		// $(document).ready(function() { //页面结构加载完成
		// });
		$(window).on("load", function() { //页面图片 内 结构加完之后 防止当前图片还没拿到就已经执行了js代码
			waterFall()
		})

		function waterFall() {
		    var box = $('.box');
			var boxWidth = $('.box').width();
			var screenWidth = $(window).width();
			var cols = parseInt(screenWidth/boxWidth);
			var heightArr = [];
			$.each('box', function(index, item) { //index索引  item当前元素
				//判断是否第一行
				var boxHeight = $(item).height(); //每张图片的高度
				if (index < cols) {
					heightArr[index] = boxHeight //把每张图片的高度存在数组中
				} else {
					//最小高度
					var minBoxHeight = Math.min(...heightArr);
					var minBoxIndex = $.inArray(minBoxHeight,heightArr);////最小高度索引 $.inArray()用于数组中某一项值的索引
					$(item).css({
						position: 'absolute',
						top: minBoxHeight + 'px',
						left: minBoxIndex * boxWidth + 'px'
					})
					//更新最小高度的值
					heightArr[minBoxIndex] += boxHiehgt;
				}
				var obxheight = Math.min(...heightarr)
			})
			// var arr = [100, 30, 34, 60];
			// var a = Math.min(...arr); //扩展运算符
			// // Math.min.apply(null,arr);//es5对应的处理方式
			// $.inArray(value, arr)
		}
	</script>
</html>
